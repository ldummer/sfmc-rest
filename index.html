<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>test 6</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="js/jquery.min.js"></script>
    <script src="js/postmonger.js"></script>
    <script type="text/javascript">
  var connection = new Postmonger.Session();

  $(window).ready(onRender);

  function onRender() {
    // JB will respond the first time 'ready' is called with 'initActivity'
    connection.trigger("ready");

    connection.trigger("requestTokens");
    connection.trigger("requestEndpoints");

    connection.on(
      'requestedTriggerEventDefinition',
      function (eventDefinitionModel) {
        var eventKey = eventDefinitionModel['eventDefinitionKey'];
        save(eventKey);
      }
    );

    function save(eventKey) {
      // subscriberKey fetched directly from Contact model
      // columnName is populated from the Journey Data model
      var params = {
        subscriberKey: '{{Contact.key}}',
        phone: '{{Event.' + eventKey + '.pone}}',
      };
      payload['arguments'].execute.inArguments = [params];
      payload["metaData"].isConfigured = true;
      
      connection.trigger("updateActivity", payload);
    }
  }


    </script>

<style type="text/css">
  body {
    padding: 20px;
    margin: 0;
    background-color: rgb(243, 255, 240);
  }
  .step {
    display: none;
  }
  #step1 {
    display: block;
  }
</style>
</head>
<body>
<div id="step1" class="step">
  Selecione:
  <select id="select1">
    <option value="">Select an option</option>
    <option value="someMessage">Some SMS</option>
    <option value="anotherMessage">Another SMS</option>
    <option value="thirdMessage">Third SMS</option>
    <option value="unknownMessage">Unknown SMS</option>
  </select>

  <button id="toggleLastStep">Toggle Last Step</button>
</div>
<div id="step2" class="step">
  Here's a second page with some info on it.
</div>
<div id="step3" class="step">
  You chose the message:
  <div id="message"></div>
</div>
<div id="step4" class="step">
  Hey, here's a fourth step, just for you. Toggle this on or off from step
  1.
</div>
</body>
</html>